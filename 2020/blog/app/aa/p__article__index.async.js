(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([[2],{"/6Nz":function(e,a,t){"use strict";t.r(a);var r=t("qIgq"),c=t.n(r),n=t("q1tI"),l=t.n(n),s=t("2NTQ"),m=t("t3Un"),i=t("8SHQ"),o=e=>{return m["a"].get("".concat(i["a"].url,"/comment/getComment"),{params:{articleId:e}})},d=e=>{var a=e.articleId,t=e.content,r=e.replyId,c=e.replyUserId,n=e.replyUserName;return m["a"].post("".concat(i["a"].url,"/comment/sendComment"),{articleId:a,content:t,replyId:r,replyUserId:c,replyUserName:n})},u=(t("+L6B"),t("2/Rp")),v=t("/MKj"),p=e=>{var a=e.onSuccess,t=e.articleId,r=e.userAvatar,s=e.showAvatar,m=void 0===s||s,i=e.className,o=void 0===i?"":i,v=e.replyId,p=void 0===v?"":v,E=e.replyUserId,N=void 0===E?"":E,y=e.replyUserName,I=void 0===y?"":y,b=Object(n["useRef"])(),f=Object(n["useState"])(!1),h=c()(f,2),g=h[0],U=h[1];Object(n["useEffect"])(()=>{var e=()=>{U(!0)},a=()=>{U(!1)};b.current.addEventListener("focus",e),b.current.addEventListener("blur",a)},[]);var S=()=>{var e=b.current.innerHTML;""!==e&&d({content:e,articleId:t,replyId:p,replyUserId:N,replyUserName:I}).then(e=>{console.log(e),a(),b.current.innerHTML=""})},j=e=>{e.ctrlKey&&13===e.keyCode&&S()},O=()=>l.a.createElement("div",{className:"avatar-box"},l.a.createElement("img",{src:r,className:"avatar",alt:""})),w=()=>l.a.createElement("div",{className:"action-box"},l.a.createElement("div",{className:"flex1"}),l.a.createElement(u["a"],{type:"primary",onClick:()=>{S()}},"send"));return l.a.createElement("div",{className:"comment-form ".concat(o)},m?O():null,l.a.createElement("div",{className:"form-box"},l.a.createElement("div",{className:"input-box"},l.a.createElement("div",{type:"text",placeholder:I?"\u56de\u590d".concat(I):"\u8bf7\u8f93\u5165\u8bc4\u8bba...",ref:b,className:"comment-input",contentEditable:"true",onKeyDown:e=>{j(e)}})),g||b.current&&b.current.innerHTML?w():null))},E=Object(v["c"])(e=>{return{userAvatar:e.users.userInfo.avatar}})(p),N=e=>{var a=e.replyId,t=void 0===a?"":a,r=e.data,s=e.articleId,m=e.onSuccess,i=Object(n["useState"])(!1),o=c()(i,2),d=o[0],u=o[1],v=e=>{var a=e.replyId,t=void 0===a?"":a,r=e.list;return l.a.createElement("div",{className:"comment-children"},r.map(e=>l.a.createElement(N,{replyId:t,key:e._id,data:e,articleId:s,onSuccess:m})))};return l.a.createElement("div",{className:"comment-item"},l.a.createElement("div",{className:"avatar"},l.a.createElement("img",{src:r.user&&r.user.avatar,alt:""})),l.a.createElement("div",{className:"content-box"},l.a.createElement("div",{className:"meta-box"},l.a.createElement("div",{className:"username"},r.user&&r.user.account)),l.a.createElement("div",{className:"content"},(r.replyUserName?"\u56de\u590d".concat(r.replyUserName,": "):"")+r.content),l.a.createElement("div",{className:"reply-stat"},l.a.createElement("time",{className:"time"},r.createTime),l.a.createElement("div",{className:"action-box"},l.a.createElement("div",{className:"like-action"}),l.a.createElement("div",{className:"comment-action",onClick:()=>{u(!d)}},"\u56de\u590d"))),d?l.a.createElement(E,{showAvatar:!1,articleId:s,className:r.replyId?"children-comment-form":"",replyId:t||r._id,replyUserName:r.authorName,replyUserId:r.author,onSuccess:m}):null,r.children&&r.children.length?l.a.createElement(v,{replyId:r._id,list:r.children}):null))},y=N,I=e=>{var a=e.articleId,t=Object(n["useState"])([]),r=c()(t,2),s=r[0],m=r[1],i=()=>{o(a).then(e=>{200===e.code&&m(e.data)})};Object(n["useEffect"])(()=>{i()},[]);var d=()=>l.a.createElement("div",{className:"comment-list"},s.map(e=>l.a.createElement(y,{data:e,articleId:a,onSuccess:i,key:e._id})));return l.a.createElement("div",{className:"comment-container"},l.a.createElement("p",{className:"comment-title"},"\u8bc4\u8bba"),l.a.createElement(E,{articleId:a,onSuccess:i}),l.a.createElement(d,null))};a["default"]=(e=>{var a=e.location.query.id,t=Object(n["useState"])({}),r=c()(t,2),m=r[0],i=r[1];return Object(n["useEffect"])(()=>{Object(s["a"])({id:a}).then(e=>{i(e.data)})},[a]),l.a.createElement(l.a.Fragment,null,l.a.createElement("article",{className:"article-container"},l.a.createElement("h1",{className:"title"},m.title),l.a.createElement("div",{className:"container-main",dangerouslySetInnerHTML:{__html:m.content}}),l.a.createElement(I,{articleId:a})))})},"2NTQ":function(e,a,t){"use strict";t.d(a,"b",function(){return n}),t.d(a,"a",function(){return l}),t.d(a,"c",function(){return s});var r=t("t3Un"),c=t("8SHQ"),n=e=>{var a=e.size,t=e.page;return r["a"].get("".concat(c["a"].url,"/article/getArticles"),{params:{size:a,page:t}})},l=e=>{var a=e.id;return r["a"].get("".concat(c["a"].url,"/article/getArticleDetail"),{params:{id:a}})},s=e=>{var a=e.content,t=e.title;return r["a"].post("".concat(c["a"].url,"/article/publishArticle"),{title:t,content:a})}}}]);